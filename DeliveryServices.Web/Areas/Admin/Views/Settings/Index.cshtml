@model DeliveryServices.Models.ApplicationUser
@{
 ViewData["Title"] = "Settings";
}

@section PageHeader {
    <div class="mb-4">
      <h1 class="h3 mb-0">Settings</h1>
 <p class="text-muted mb-0">Manage your account preferences and security</p>
    </div>
}

<div class="row g-4">
    <!-- Email Notifications -->
    <div class="col-lg-6">
   <div class="card">
       <div class="card-header bg-white">
        <h5 class="mb-0"><i class="bi bi-envelope"></i> Email Notifications</h5>
     </div>
 <div class="card-body">
    <form asp-action="UpdateEmailPreferences" method="post">
     @Html.AntiForgeryToken()

      <div class="mb-3">
   <div class="form-check form-switch">
  <input class="form-check-input" 
        type="checkbox" 
   role="switch" 
      id="emailNotifications" 
     name="emailNotifications" 
       checked />
 <label class="form-check-label" for="emailNotifications">
  <strong>Email Notifications</strong>
      <p class="text-muted small mb-0">Receive email notifications for important updates</p>
   </label>
     </div>
   </div>

    <div class="mb-3">
 <div class="form-check form-switch">
     <input class="form-check-input" 
         type="checkbox" 
        role="switch" 
  id="orderNotifications" 
   name="orderNotifications" 
      checked />
 <label class="form-check-label" for="orderNotifications">
<strong>Order Updates</strong>
     <p class="text-muted small mb-0">Get notified about new orders and status changes</p>
 </label>
    </div>
 </div>

    <div class="mb-3">
 <div class="form-check form-switch">
   <input class="form-check-input" 
         type="checkbox" 
      role="switch" 
       id="weeklyReports" 
   name="weeklyReports" />
 <label class="form-check-label" for="weeklyReports">
     <strong>Weekly Reports</strong>
 <p class="text-muted small mb-0">Receive weekly summary reports</p>
    </label>
    </div>
    </div>

   <button type="submit" class="btn btn-primary">
       <i class="bi bi-check-circle"></i> Save Preferences
  </button>
    </form>
    </div>
 </div>
    </div>

    <!-- Security Settings -->
    <div class="col-lg-6">
 <div class="card">
    <div class="card-header bg-white">
     <h5 class="mb-0"><i class="bi bi-shield-lock"></i> Security</h5>
   </div>
     <div class="card-body">
    <form asp-action="UpdateSecuritySettings" method="post">
   @Html.AntiForgeryToken()

   <div class="mb-3">
<div class="form-check form-switch">
 <input class="form-check-input" 
      type="checkbox" 
        role="switch" 
 id="twoFactorEnabled" 
      name="twoFactorEnabled" 
    @(Model.TwoFactorEnabled ? "checked" : "") />
  <label class="form-check-label" for="twoFactorEnabled">
       <strong>Two-Factor Authentication</strong>
    <p class="text-muted small mb-0">Require a second form of authentication when signing in</p>
    </label>
    </div>
  </div>

    <button type="submit" class="btn btn-primary">
      <i class="bi bi-check-circle"></i> Update Security
  </button>
  </form>

   <hr />

   <div class="mt-3">
<h6>Password</h6>
  <p class="text-muted small">Last changed: Never</p>
    <a asp-area="Admin" asp-controller="Profile" asp-action="ChangePassword" class="btn btn-outline-primary">
   <i class="bi bi-key"></i> Change Password
 </a>
      </div>
   </div>
  </div>
    </div>

    <!-- Account Information -->
    <div class="col-lg-12">
        <div class="card">
       <div class="card-header bg-white">
      <h5 class="mb-0"><i class="bi bi-info-circle"></i> Account Information</h5>
   </div>
      <div class="card-body">
        <div class="row g-3">
    <div class="col-md-4">
      <label class="text-muted small">Account Created</label>
       <div class="fw-semibold">@Model.Id</div>
  <small class="text-muted">User ID</small>
       </div>
 <div class="col-md-4">
   <label class="text-muted small">Email Status</label>
        <div>
@if (Model.EmailConfirmed)
  {
 <span class="badge bg-success">Verified</span>
      }
 else
{
  <span class="badge bg-warning">Not Verified</span>
   }
    </div>
     </div>
   <div class="col-md-4">
  <label class="text-muted small">Account Status</label>
   <div>
     @if (Model.LockoutEnd.HasValue && Model.LockoutEnd.Value > DateTimeOffset.UtcNow)
    {
      <span class="badge bg-danger">Locked</span>
    }
 else
 {
<span class="badge bg-success">Active</span>
 }
      </div>
     </div>
  </div>
   </div>
 </div>
    </div>
</div>
